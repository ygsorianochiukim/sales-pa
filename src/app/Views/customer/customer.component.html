<div class="w-full h-dvh flex flex-col">
  <div class="p-5 flex flex-col gap-3 items-start">
    <span [routerLink]="['/home']" routerLinkActive="router-link-active" >Back</span>
    <header class="font-bold text-3xl">
      Buyers Information
    </header>
  </div>
  <div class="h-dvh bg-secondary rounded-t-4xl px-7 pt-10">

  <div class="flex justify-between mb-6">
    <div class="flex flex-col items-center w-1/3" *ngFor="let step of steps; let i = index">
      <div class="w-10 h-10 flex items-center justify-center rounded-full" [ngClass]="
        {
          'bg-primary text-white': currentStep >= i,
          'bg-gray-300 text-gray-600': currentStep < i
        }">
        {{ i + 1 }}
      </div>
      <span class="text-xs mt-2" [ngClass]="
        {
          'text-primary font-semibold': currentStep >= i,
          'text-gray-500': currentStep < i
        }">
        {{ step }}
      </span>
    </div>
  </div>
  <form>
    <div *ngIf="currentStep === 0">
      <label>Buyers Name</label>
      <div class="flex flex-col gap-3">
        <div class="flex flex-row gap-2">
          <div class="w-2/3 flex flex-row border-b-2 items-center mt-1 gap-2 bg-white p-2 rounded-lg">
            <lucide-icon [img]="user"></lucide-icon>
            <input type="text" name="first_name" [(ngModel)]="nameFields.first_name" class="w-full p-1 outline-none placeholder:text-black" placeholder="First Name"/>
          </div>
          <div class="w-1/3 flex flex-row border-b-2 items-center mt-1 gap-2 bg-white p-2 rounded-lg">
            <lucide-icon [img]="user"></lucide-icon>
            <input type="text" name="middle_name" [(ngModel)]="nameFields.middle_name" class="w-full p-1 outline-none placeholder:text-black" placeholder="Middle Name"/>
          </div>
        </div>
        <div class="flex flex-row border-b-2 items-center mt-1 gap-2 bg-white p-2 rounded-lg">
          <lucide-icon [img]="user"></lucide-icon>
          <input type="text" name="last_name" [(ngModel)]="nameFields.last_name" class="w-full p-1 outline-none placeholder:text-black" placeholder="Last Name"/>
        </div>
      </div>
      <div class="mt-3">
        <label>Contact Number</label>
        <div class="flex flex-row border-b-2 p-2 bg-white items-center mt-1 rounded-lg">
          <lucide-icon [img]="phone"></lucide-icon>
          <span class="ml-2">+63</span>
          <input
            type="text"
            name="contact_number"
            [(ngModel)]="buyersField.contact_number"
            class="w-full p-1 outline-none placeholder:text-black"
            placeholder="Contact Number"
          />
        </div>
      </div>
    </div>

    <!-- ADDRESS INFO -->
    <div *ngIf="currentStep === 1">
      <label>Address</label>
      <div class="flex flex-col gap-3">
        <input type="text" class="p-2 rounded-lg border" placeholder="Province" [(ngModel)]="buyersField.province" name="province">
        <input type="text" class="p-2 rounded-lg border" placeholder="Municipality" [(ngModel)]="buyersField.municipality" name="municipality">
        <input type="text" class="p-2 rounded-lg border" placeholder="Barangay" [(ngModel)]="buyersField.barangay" name="barangay">
        <input type="text" class="p-2 rounded-lg border" placeholder="Zipcode" [(ngModel)]="buyersField.zipcode" name="zipcode">
      </div>
    </div>

    <!-- OTHER INFO -->
    <div *ngIf="currentStep === 2">
      <label>OTP</label>
      <div class="flex flex-row border-b-2 p-2 bg-white items-center mt-1 gap-2 rounded-lg">
        <lucide-icon [img]="otp"></lucide-icon>
        <input
          type="text"
          name="otp"
          [(ngModel)]="buyersField.otp"
          class="w-full p-1 outline-none placeholder:text-black"
          placeholder="OTP"
        />
      </div>
      <label>{{ otpCode }}</label>
    </div>

    <!-- Navigation Buttons -->
    <div class="flex justify-between mt-6">
      <button
        type="button"
        class="bg-gray-300 text-black px-4 py-2 rounded-full"
        (click)="prevStep()"
        [disabled]="currentStep === 0"
      >
        Back
      </button>

      <button
        type="button"
        class="bg-primary text-white px-4 py-2 rounded-full"
        (click)="nextStep()"
        *ngIf="currentStep < steps.length - 1"
      >
        Next
      </button>

      <button
        type="button"
        class="bg-primary text-white px-4 py-2 rounded-full"
        (click)="submitBuyersInfo()"
        *ngIf="currentStep === steps.length - 1"
      >
        Save Changes
      </button>
    </div>
  </form>
</div>

</div>