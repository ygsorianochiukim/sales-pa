<div class="w-full h-dvh flex flex-col">
  <div class="p-5 flex flex-col gap-3 items-start">
    <span [routerLink]="['/home']" routerLinkActive="router-link-active" >Back</span>
    <header class="font-bold text-3xl font-Playfair">
      Buyers Information
    </header>
  </div>
  <div class="h-dvh bg-secondary rounded-t-[50px] px-7 pt-10">

  <div class="flex justify-between mb-6">
    <div class="flex flex-col items-center w-1/3" *ngFor="let step of steps; let i = index">
      <div class="w-10 h-10 flex items-center justify-center rounded-full font-semibold" [ngClass]="
        {
          'bg-primary text-white': currentStep >= i,
          'bg-gray-300 text-gray-600': currentStep < i
        }">
        {{ i + 1 }}
      </div>
      <span class="text-xs mt-2" [ngClass]="
        {
          'text-primary font-semibold': currentStep >= i,
          'text-gray-500': currentStep < i
        }">
        <span class="text-white font-semibold">{{ step }}</span>
      </span>
    </div>
  </div>
  <form>
    <div *ngIf="currentStep === 0">
      <div class="flex flex-col gap-3">
        <div>
          <label for="">Name</label>
          <div class="w-full flex flex-row border-b-2 items-center mt-1 gap-2 bg-white p-2 rounded-lg">
            <lucide-icon [img]="user"></lucide-icon>
            <input type="text" name="first_name" [(ngModel)]="nameFields.first_name" class="w-full p-1 outline-none placeholder:text-black" placeholder="First Name"/>
          </div>
        </div>
        <div>
          <div class="w-full flex flex-row border-b-2 items-center gap-2 bg-white p-2 rounded-lg">
            <lucide-icon [img]="user"></lucide-icon>
            <input type="text" name="middle_name" [(ngModel)]="nameFields.middle_name" class="w-full p-1 outline-none placeholder:text-black" placeholder="Middle Name"/>
          </div>
        </div>
        <div>
          <div class="flex flex-row border-b-2 items-center gap-2 bg-white p-2 rounded-lg">
            <lucide-icon [img]="user"></lucide-icon>
            <input type="text" name="last_name" [(ngModel)]="nameFields.last_name" class="w-full p-1 outline-none placeholder:text-black" placeholder="Last Name"/>
          </div>
        </div>
        <div>
          <label for="">Birth Date</label>
          <div class="flex flex-row border-b-2 items-center mt-1 gap-2 bg-white p-2 rounded-lg">
            <lucide-icon [img]="calendar"></lucide-icon>
            <input type="date" name="birthdate" [(ngModel)]="buyersField.birthdate" class="w-full p-1 outline-none placeholder:text-black" placeholder="Birth Date"/>
          </div>
        </div>
        <div>
          <label for="">Birth Place</label>
          <div class="flex flex-row border-b-2 items-center mt-1 gap-2 bg-white p-2 rounded-lg">
            <lucide-icon [img]="place"></lucide-icon>
            <input type="text" name="birthplace" [(ngModel)]="buyersField.birthplace" class="w-full p-1 outline-none placeholder:text-black" placeholder="Birthplace"/>
          </div>
        </div>
      </div>
      <div class="mt-3">
        <label>Contact Number</label>
        <div class="flex flex-row border-b-2 p-2 bg-white items-center mt-1 rounded-lg">
          <lucide-icon [img]="phone"></lucide-icon>
          <span class="ml-2">+63</span>
          <input
            type="text"
            name="contact_number"
            [(ngModel)]="buyersField.contact_number"
            class="w-full p-1 outline-none placeholder:text-black"
            placeholder="Contact Number"
          />
        </div>
      </div>
    </div>
    <div *ngIf="currentStep === 1" class="flex flex-col gap-3">
      <label class="font-bold mb-2">Address</label>
      <ion-item class="rounded-lg">
        <ion-select label="Province" name="province" placeholder="Select Province" [(ngModel)]="buyersField.province" (ionChange)="onProvinceChange()">
          <ion-select-option *ngFor="let province of provincesField" [value]="province">
            {{ province }}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item class="rounded-lg">
        <ion-select label="Municipality" placeholder="Select Municipality" name="municipality" [(ngModel)]="buyersField.municipality" (ionChange)="onMunicipalityChange()">
          <ion-select-option *ngFor="let municipality of municipalitiesField" [value]="municipality">
            {{ municipality }}
          </ion-select-option>
        </ion-select>
      </ion-item>
      <ion-item class="rounded-lg">
        <ion-select label="Barangay" name="barangay" placeholder="Select Barangay" [(ngModel)]="buyersField.barangay">
          <ion-select-option *ngFor="let barangay of barangaysField" [value]="barangay">
            {{ barangay }}
          </ion-select-option>
        </ion-select>
      </ion-item>
      <div class="flex flex-row border-b-2 items-center gap-2 bg-white p-2 rounded-lg">
        <lucide-icon [img]="map"></lucide-icon>
        <input type="text" name="purok" [(ngModel)]="buyersField.purok" class="w-full p-1 outline-none placeholder:text-black" placeholder="Purok"/>
      </div>
      <div class="flex flex-row border-b-2 items-center gap-2 bg-white p-2 rounded-lg">
        <lucide-icon [img]="zip"></lucide-icon>
        <input type="text" name="zipcode" [(ngModel)]="buyersField.zipcode" class="w-full p-1 outline-none placeholder:text-black" placeholder="Zipcode"/>
      </div>
    </div>
    <div *ngIf="currentStep === 2" class="flex flex-col gap-2">
      <div>
        <ion-item class="rounded-lg">
          <ion-select name="civil_status" [(ngModel)]="buyersField.civil_status" label="Civil Status" placeholder="Civil Status">
            <ion-select-option value="Single">Single</ion-select-option>
            <ion-select-option value="Married">Married</ion-select-option>
            <ion-select-option value="Widow">Widow</ion-select-option>
            <ion-select-option value="Rather Not Say">Rather Not Say</ion-select-option>
          </ion-select>
        </ion-item>
      </div>
      <div>
        <ion-item class="rounded-lg">
          <ion-select name="sex" [(ngModel)]="buyersField.sex" label="Gender" placeholder="Gender">
            <ion-select-option value="Male">Male</ion-select-option>
            <ion-select-option value="Female">Female</ion-select-option>
            <ion-select-option value="Others">Others</ion-select-option>
          </ion-select>
        </ion-item>
      </div>
      <div>
        <div class="flex flex-row border-b-2 p-2 bg-white items-center mt-1 gap-2 rounded-lg">
          <lucide-icon [img]="work"></lucide-icon>
          <input type="text" name="occupation" [(ngModel)]="buyersField.occupation" class="w-full p-1 outline-none placeholder:text-black" placeholder="Occupation"/>
        </div>
      </div>
      <div>
        <div class="flex flex-row border-b-2 p-2 bg-white items-center mt-1 gap-2 rounded-lg">
          <lucide-icon [img]="building"></lucide-icon>
          <input type="text" name="company_name" [(ngModel)]="buyersField.company_name" class="w-full p-1 outline-none placeholder:text-black" placeholder="Company Name"/>
        </div>
      </div>
      <div>
        <label>OTP</label>
        <div class="flex flex-row border-b-2 p-2 bg-white items-center mt-1 gap-2 rounded-lg">
          <lucide-icon [img]="otp"></lucide-icon>
          <input type="text" name="otp" [(ngModel)]="buyersField.otp" class="w-full p-1 outline-none placeholder:text-black" placeholder="OTP"/>
        </div>
      </div>
      <!-- <label>{{ otpCode }}</label> -->
    </div>

    <!-- Navigation Buttons -->
    <div class="flex justify-between mt-6">
      <button type="button" class="bg-gray-300 text-black !px-9 !py-2 rounded-full" (click)="prevStep()" [disabled]="currentStep === 0">
        Back
      </button>
      <button type="button" class="bg-primary text-white !px-9 !py-2 rounded-full"  (click)="nextStep()" *ngIf="currentStep < steps.length - 1">
        Next
      </button>
      <button type="button" class="bg-primary text-white !px-4 !py-2 rounded-full" (click)="submitBuyersInfo()" *ngIf="currentStep === steps.length - 1">
        Save Changes
      </button>
    </div>
  </form>
</div>

</div>