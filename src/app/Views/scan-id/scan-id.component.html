<div class="flex flex-col p-5 gap-4 min-h-screen">
  <span [routerLink]="['/payment']" class="block w-full text-left">Back</span>
  <header class="font-bold font-Playfair text-3xl mb-4 text-gray-800">Scan Printed IDs</header>

  <form>
    <div>
      <ion-item class="rounded-lg border">
        <ion-select name="selectedID" [(ngModel)]="selectedID" label="Select ID" placeholder="Select ID">
          <ion-select-option value="Drivers License">Drivers License</ion-select-option>
          <ion-select-option value="National ID">National ID</ion-select-option>
          <!-- <ion-select-option value="Others">Others</ion-select-option> -->
        </ion-select>
      </ion-item>
    </div>
  </form>
  <button *ngIf="!scanning && !capturedImage" (click)="startCamera()" [disabled]="!selectedID" class="flex flex-row items-center justify-center gap-3 !p-4 !rounded-full text-white transition disabled:opacity-50 disabled:cursor-not-allowed" [ngClass]="selectedID ? 'bg-primary' : 'bg-gray-400'">
    <lucide-icon [img]=" !selectedID ? qrcode : selectedID === 'Drivers License' ? camera : qrcode "></lucide-icon>
    {{ !selectedID ? 'Select ID' : selectedID === 'Drivers License' ? 'Scan ID' : selectedID === 'National ID' ? 'Scan QR Code' : 'Scan QR Code' }}
  </button>
  <div *ngIf="capturedImage && !loading" class="w-full max-w-md">
    <div class="relative rounded-xl overflow-hidden shadow-xl">
      <img [src]="capturedImage" alt="Captured ID" class="w-full">
      <button
        (click)="cancelScan()"
        class="absolute top-3 right-3 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-all"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
  </div>

  <div *ngIf="loading" class="flex flex-col items-center gap-4 mt-4">
    <div class="w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"></div>
    <p class="text-gray-700 font-medium text-lg">Processing ID</p>
  </div>

  <div *ngIf="currentPersonData && !loading" class="w-full max-w-md">
    <div class="bg-white rounded-2xl shadow-xl p-6 border-2 border-green-500">
      <div class="flex items-center justify-between mb-4 pb-4 border-b-2 border-gray-100">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
          </div>
          <h3 class="text-2xl font-bold text-gray-800">Successfully Scanned</h3>
        </div>
      </div>

      <div class="space-y-3">
        <div class="flex flex-col">
          <span class="text-sm text-gray-500 font-medium mb-1">ID Type</span>
          <span class="text-lg font-semibold text-indigo-600">{{ currentPersonData.idType }}</span>
        </div>

        <div class="flex flex-col">
          <span class="text-sm text-gray-500 font-medium mb-1">Full Name</span>
          <span class="text-lg font-semibold text-gray-800">{{ currentPersonData.name }}</span>
        </div>

        <div class="flex flex-col">
          <span class="text-sm text-gray-500 font-medium mb-1">ID Number</span>
          <span class="text-lg font-semibold text-gray-800">{{ currentPersonData.id }}</span>
        </div>
      </div>
      <div class="flex gap-3 mt-6">
        <button (click)="saveAndContinue()" class="bg-green-600 !px-5 !py-3 text-white !rounded-full">
          Save & Scan Next
        </button>
        <button (click)="cancelScan()" class="bg-red-600 !px-5 !py-3 text-white !rounded-full">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>